<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Commander des cartes - Les Aquarelles de Flo</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .form-container {
      max-width: 700px;
      margin: 2em auto;
      padding: 2em;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    form label { display: block; margin-top: 1em; font-weight: bold; }
    form input, form select, form textarea {
      width: 100%; padding: 0.6em; margin-top: 0.4em;
      border: 1px solid #ccc; border-radius: 6px;
    }
    .preview {
      display: flex; flex-wrap: wrap;
      margin-top: 1em; gap: 10px;
    }
    .preview img {
      width: 100px; height: auto;
      border-radius: 6px; border: 1px solid #ddd;
    }
    .checkboxes {
      display: flex; flex-wrap: wrap;
      gap: 10px; margin-top: 1em;
    }
  </style>
</head>
<body>
  <header>
    <h1>Commander vos cartes postales ðŸŽ¨</h1>
  </header>

  <div class="form-container">
    <form name="commande" method="POST" data-netlify="true">
      <label for="pack">Choisir un pack :</label>
      <select id="pack" name="pack" onchange="updatePreview()">
        <option value="">-- SÃ©lectionnez --</option>
        <option value="pack2">Pack de 2 cartes</option>
        <option value="pack3">Pack de 3 cartes</option>
        <option value="pack5">Pack de 5 cartes</option>
        <option value="custom">SÃ©lection personnalisÃ©e (jusquâ€™Ã  5)</option>
      </select>

      <!-- SÃ©lection personnalisÃ©e -->
      <div id="custom-selection" style="display:none;">
        <p>Choisissez vos cartes :</p>
        <div class="checkboxes" id="custom-checkboxes"></div>
      </div>

      <!-- AperÃ§u -->
      <div class="preview" id="preview"></div>

      <label>Nom complet :</label>
      <input type="text" name="nom" required>

      <label>Adresse postale :</label>
      <textarea name="adresse" rows="3" required></textarea>

      <label>Email :</label>
      <input type="email" name="email" required>

      <label>Mode de paiement (Ã  convenir par email) :</label>
      <select name="paiement">
        <option value="virement">Virement bancaire</option>
        <option value="paypal">PayPal</option>
        <option value="autre">Autre</option>
      </select>

      <button type="submit" style="margin-top:1.5em; padding:0.8em 1.5em; background:#083b66; color:white; border:none; border-radius:6px; cursor:pointer;">
        Envoyer la commande
      </button>
    </form>
  </div>

  <script>
    const packs = {
      pack2: ["images/carte_lac.jpeg", "images/carte_lune.jpeg"],
      pack3: ["images/golden_dowhill.jpeg", "images/carte_elementsDeVie.jpeg", "images/carte_ramen.jpeg"],
      pack5: ["images/carte_lac.jpeg", "images/carte_lune.jpeg", "images/carte_ramen.jpeg", "images/carte_rue.jpeg", "images/dance_emotion.jpeg"]
    };

    const allCards = [
      { src: "images/golden_dowhill.jpeg", caption: "Golden downhill" },
      { src: "images/carte_elementsDeVie.jpeg", caption: "Ã‰lÃ©ments de vie" },
      { src: "images/carte_lac.jpeg", caption: "Lac AtitlÃ¡n" },
      { src: "images/carte_ramen.jpeg", caption: "Restaurant Japonais" },
      { src: "images/carte_rue.jpeg", caption: "Rue du marchÃ© de San Pedro" },
      { src: "images/carte_lune.jpeg", caption: "Haiku Ã  la Lune" },
      { src: "images/dance_emotion.jpeg", caption: "Danse des Ã©motions" },
      { src: "images/elfuego.jpeg", caption: "Volcan el Fuego" }
    ];

    function updatePreview() {
      const pack = document.getElementById("pack").value;
      const preview = document.getElementById("preview");
      const custom = document.getElementById("custom-selection");
      preview.innerHTML = "";

      if (pack === "custom") {
        custom.style.display = "block";
        return;
      } else {
        custom.style.display = "none";
      }

      if (packs[pack]) {
        packs[pack].forEach(src => {
          const img = document.createElement("img");
          img.src = src;
          preview.appendChild(img);
        });
      }
    }

    // Construire les cases Ã  cocher pour le mode custom
    const checkboxesDiv = document.getElementById("custom-checkboxes");
    allCards.forEach(card => {
      const label = document.createElement("label");
      label.style.width = "120px";
      label.innerHTML = `<input type="checkbox" name="customCards" value="${card.caption}" onchange="updateCustomPreview()"> ${card.caption}`;
      checkboxesDiv.appendChild(label);
    });

    function updateCustomPreview() {
      const checked = document.querySelectorAll('input[name="customCards"]:checked');
      const preview = document.getElementById("preview");
      preview.innerHTML = "";

      if (checked.length > 5) {
        alert("Vous pouvez sÃ©lectionner au maximum 5 cartes !");
        checked[checked.length - 1].checked = false;
        return;
      }

      checked.forEach(box => {
        const card = allCards.find(c => c.caption === box.value);
        if (card) {
          const img = document.createElement("img");
          img.src = card.src;
          preview.appendChild(img);
        }
      });
    }
  </script>
</body>
</html>
